<link rel="import" href="bower_components/polymer/polymer-element.html">

<dom-module id="three-camera">
  <script>
    class ThreeCamera extends Polymer.Element {

      static get is() {
        return 'three-camera'
      }

      static get properties() {
        return {
          position: {type: Array, observer: '_positionChanged', value: [0, 0, 0]},
          focalPoint: {type: Array, observer: '_focalPointChanged', value: [0, 0, 0]},
          object: {
            type: Object,
            notify: true,
          }
        }
      }

      constructor() {
        super();
        this.object = new THREE.PerspectiveCamera(75, 1, 0.1, 3000);
        this.object.up = new THREE.Vector3(0, 0, 1);
      }

      _positionChanged(newPosition, oldPosition) {
        this.object.position.set(...newPosition);
        this.object.updateProjectionMatrix();
      }

      _focalPointChanged(newPosition, oldPosition) {
        this.object.lookAt(new THREE.Vector3().fromArray(newPosition));
      }
    }

    customElements.define(ThreeCamera.is, ThreeCamera);
  </script>
</dom-module>